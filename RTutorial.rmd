---
title: "Intro to R"
output:
  html_document: default
  pdf_document: default
---

# Introduction  

The term `R` is used to refer to both the programming language as well as the software that interprets the scripts written using it. The learning curve may be steeper than with other statistical software, but with `R`, the results of your analysis or your plot does not rely on remembering what order you clicked on things, but instead on the written commands you generated. In `R` you will work in scripts or with dynamic documents with scripts within them. Scripts may feel strange at first, but they make the steps you used in your analysis clear for both you and for someoone who wants to give you feedback.  

<!-- `R` was generated from `S`, a statistical programming language developed by John Chambers, Rick Becker, and Alan Wilks at Bell Labs. It's first implementation was in 1976. `S` was then superceded by S-PLUS, commercial software owned by TIBCO, and then came `R`.  -->

`RStudio` is a __free__ computer application that allows you access to the resources of `R`, while providing you with a comfortable enviroment working environment. There are many ways you can interact with `R`, but for many reasons `RStudio` has become the most popular. To function correctly, RStudio needs R and therefore both need to be installed on your computer.


For our use of `RStudio` the desktop version will suffice. There are many videos and guides for installation. See the Stat 217 textbook (pages 12-14) here: 
https://scholarworks.montana.edu/xmlui/bitstream/handle/1/2999/Greenwood_Book.pdf?sequence=3&isAllowed=y_

* Open RStudio.  
* RStudio has a panel of 4 windows, where each can be viewed at the same time and has multiple tabs available.  

    + the __Source__ for your scripts and documents (top-left)  
    + the `R` __Console__ (bottom-left)  
    + your __Environment/History__ (top-right)  
    + and your __Files/Plots/Packages/Help/Viewer__ (bottom-right). 


![](rstudio.png)

## Work Flow in `RStudio`

It is good code writing practice to keep a set of all related data, analysis, plots, documents, etc. in the same folder. When all the pieces are in the same folder, it allows for a clean workflow and __working directory__. When you are executing code for a document/script `R` will search for things (such as data) in the same folder as the document/script, which is called a _relative path_. If you are having troubles loading your data into `RStudio` and you have saved your files in this way, it is possible that `R` is searching in the wrong location and you need to change your working directory.  

The easiest way to do this is,  
* click on the __Session__ drop-down from the top of the screen,  
* select the __Set Working Directory__ tab,  
* select __To Source File Location__.  

After this process `R` will be searching for objects (such as data) in the folder that the document/script is saved.   

# Working in `R`

`RStudio` allows for you to execute commands directly from the document/script editor by using the __Ctrl + Enter__ (on Macs, __Cmd + Return__) shortcut. If you place your curser on the line in the document/script that you would like to run and hit this shortcut, `R` will execute that line(s) of code for you.  

If `R` is ready to accept commands, the `R` console (in the bottom-left) will show a `>` prompt. When `R` receives a command (by typing, copy-pasting, or using the shortcut) it will execute it, and when finished will show the results and display a `>` symbol once again.  

## Calculator  

_Practice:_ enter each of the following commands and confirm that the response is the correct answer.  
```{r Calculator} 
1 + 2 
16*9
sqrt(2)
20/5
18.5 - 7.21
3 %% 2
```

## Importing Data  
* Use the __Import Dataset__ button in the __Environment__ tab  
* Choose the __From CSV__ option  
* Click on the __Browse__ button  
* Direct the computer to where you saved the _BlackfootFish_ data file, click __open__  
* It will bring up a preview of the data  
* Click on the __Import__ button  
    
Notice the code that outputs in the console (the bottom left square). This is the code that you could have typed in the code chunk below to import the data yourself. __Copy and paste the code that was output in the code chunk below.      

```{r Variables} 
library(readr)
BlackfootFish <- read_csv("BlackfootFish.csv")
# copy and paste the code that was used by R to import the data 
# be careful to only copy the code that is next to the > signs! 
```  

## Structure of Data  

The data we will use is organized into _data tables_. When you imported the BlackfootFish data into `RStudio` was saved as an __object__. You are able to inspect the structure of the BlackfootFish object using functions built in to `R` (no package necessary).  

Run the folling code. What is output from each of the following commands?  

```{r structure}
class(BlackfootFish)

names(BlackfootFish)

str(BlackfootFish)

summary(BlackfootFish)
```

The BlackfootFish dataset is saved as a "tibble" or `tbl_df` when you use the __Import Dataset__ button. Due to the data having this structure, the `str` command outputs more information than you really want! What class is each of the variables in our dataset? 

If we were interested in accessing a specific variable in our dataset, we use the `$` command. This extracts that variable from the dataset. When this is extracted, `R` views the variable as a vector of entries, which is what the [1:18352] refers to.   

```{r extract}
years <- BlackfootFish$year ## extracts year from the dataset and saves it into a new variable named year

str(years) ## using the new variable (remember case matters!)
```

Another method for accessing data in the dataset is using the bracket notation ([row, column]). If you look to your right in the __Environment__ window, you notice that `RStudio` tells you the dimensions of the BlackfootFish data. You can roughly view the dataset as a matrix of entries, with names for each of the columns. I could instead use bracket notation to perform the same task as above, using the following code. 

```{r bracket}
years <- BlackfootFish[, 5] ## This takes ALL rows of data but only the fifth column

str(years) ## years enherits the structure of Blackfoot when we use this method
```

The `species` and `section` variables were saved as characters, but they are acutally factors. In the data `section` has two levels (Johnsrud and ScottyBrown) and `species` has four levels (RBT, WCT, Bull, and Brown). If we want `R` to view these variables as factors, we need to convert them to factors!  

```{r factors}
unique(BlackfootFish$species)  ## tells you the unique values of species
unique(BlackfootFish$section) ## tells you the unique values of section  

BlackfootFish$species <- as.factor(BlackfootFish$species)
BlackfootFish$section <- as.factor(BlackfootFish$section)
```

## Packages 

As we mentioned previously, `R` has many packages, where people around the world work to provide and maintain new software and new capabilites for `R`. You will slowly accumulate a number of packages that you use often for a variety of purposes. In order to make the elements (data, functions) of the packages, you have to _load_ the package.  

We're going to install a few packages that are often used.  
* Use the __Install__ button in the __Packages__ tab  
* Type in `car` and `mosaic`  into the blank line 
* Check the __Install dependencies__ box  
* Click on the __Import__ button  

There will be a large amount of output coming out of the console. This output is `RStudio` trying to download the package(s) you requested by contacting the mirror you chose for it to use when downloading (I chose Northern Michigan University). Once the computer has downloaded the packages, it will tell you that "` The downloaded binary packages are in}", followed by the location of the files. 

Now that the files are downloaded, we need to _load_ them in order to use them. The following code will load each pacage, please run it!  

```{r packages}
library(car)
library(mosaic)
```

Notice that when loading the `mosaic` package that there is a large amount of output. This output is telling you all of the other packages that are loaded with the `mosaic` package, because `mosaic` is dependent on them (`dplyr, lattice, ggformula, ggplot2` etc.).


